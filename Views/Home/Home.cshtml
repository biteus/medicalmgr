@model HealthStatistics

@using Microsoft.AspNetCore.Identity
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@using MedicalManager.Areas.Identity.Data
@using System.Linq

@{
    ViewData["Title"] = "Blood Sugar Graph";
    var user = await UserManager.GetUserAsync(User);
    var sysBoxColor = (Convert.ToInt32(@Model.ThirtyDaysHighSystolic) > 185) ? "small-box bg-danger" : "small-box bg-success";
    var diaBoxColor = (Convert.ToInt32(@Model.ThirtyDaysHighDiastolic) > 120) ? "small-box bg-danger" : "small-box bg-success";
    var sgrBoxColor = ((Convert.ToInt32(@Model.ThirtyDaysHighSugar) > 185) || (Convert.ToInt32(@Model.ThirtyDaysLowSugar) < 65)) ? "small-box bg-danger" : "small-box bg-success";
    var pulsBoxColor = ((Convert.ToInt32(@Model.ThirtyDaysHighPulse) > 100) || (Convert.ToInt32(@Model.ThirtyDaysLowPulse) < 60 )) ? "small-box bg-danger" : "small-box bg-success";
    var chartBP = @Model.BloodPressure;
    var chartSys = chartBP.Select(e => e.Systolic).ToList();
    var chartDia = chartBP.Select(e => e.Diastolic).ToList();
    var chartTime = chartBP.Select(e => e.ReadingDate).ToList();
    var chartSgr = @Model.BloodSugars.Select(e => e.Sugar).ToList();;

                                                            
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>Combination of 3D-Line and 3D-Column Chart</title>
  <link href="https://playground.anychart.com/gallery/src/3D_Line_Charts/Combination_of_3D-Line_and_3D-Column_Chart/iframe" rel="canonical">
  <meta content="3D Chart,3D Column Chart,Animation,Bar Chart,Column Chart,Tooltip" name="keywords">
  <meta content="AnyChart - JavaScript Charts designed to be embedded and integrated" name="description">
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <link href="css/anychart-ui.min.css" rel="stylesheet" type="text/css">
  <link href="css/anychart-font.min.css" rel="stylesheet" type="text/css">
  <link href="../css/local.css" rel="stylesheet" type="text/css">
  <style>
    html,
    body,
    #container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
    }

  .low .title { float:right }
  .high .name { float:left }

  .chart{
  vertical-align: middle;
  width: 100%;
  margin: 0 auto;
  position: relative;
  display: inline-block;

}
@* p {
  text-align: center;
  font-family:'Verdana', sans-serif;
  font-size: 10px;
} *@

canvas{
  height: 100%;
}

.highcharts-figure, .highcharts-data-table table {
    min-width: 310px; 
    max-width: 800px;
    margin: 1em auto;
}

#container {
    height: 375px;
}

#sugar {
    height: 250px;
}

.highcharts-data-table table {
	font-family: Verdana, sans-serif;
	border-collapse: collapse;
	border: 1px solid #EBEBEB;
	margin: 10px auto;
	text-align: center;
	width: 100%;
	max-width: 500px;
}
.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}
.highcharts-data-table th {
	font-weight: 600;
    padding: 0.5em;
}
.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
    padding: 0.5em;
}
.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
    background: #f8f8f8;
}
.highcharts-data-table tr:hover {
    background: #f1f7ff;
}
  </style>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="plugins/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="plugins/daterangepicker/daterangepicker.css">
  <!-- summernote -->
  <link rel="stylesheet" href="plugins/summernote/summernote-bs4.min.css">

  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/highcharts-3d.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <link rel="stylesheet" href="dist/css/chart.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

  <script>
    $(function () {
'use strict'

// Make the dashboard widgets sortable Using jquery UI
$('.connectedSortable').sortable({
  placeholder: 'sort-highlight',
  connectWith: '.connectedSortable',
  handle: '.card-header, .nav-tabs',
  forcePlaceholderSize: true,
  zIndex: 999999
})
$('.connectedSortable .card-header').css('cursor', 'move')

// jQuery UI sortable for the todo list
$('.todo-list').sortable({
  placeholder: 'sort-highlight',
  handle: '.handle',
  forcePlaceholderSize: true,
  zIndex: 999999
})

// bootstrap WYSIHTML5 - text editor
$('.textarea').summernote()

$('.daterange').daterangepicker({
  ranges: {
    Today: [moment(), moment()],
    Yesterday: [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
    'This Month': [moment().startOf('month'), moment().endOf('month')],
    'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
  },
  startDate: moment().subtract(29, 'days'),
  endDate: moment()
}, function (start, end) {
  // eslint-disable-next-line no-alert
  alert('You chose: ' + start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
})

/* jQueryKnob */
$('.knob').knob()

// The Calender
$('#calendar').datetimepicker({
  format: 'L',
  inline: true
})

// SLIMSCROLL FOR CHAT WIDGET
$('#chat-box').overlayScrollbars({
  height: '250px'
})

})

</script>

</head>
<body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
          <!-- Right navbar links -->
          <ul class="navbar-nav ml-auto">
            <!-- Navbar Search -->
            <!-- Messages Dropdown Menu -->
            <li class="nav-item dropdown">
              <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                <a href="#" class="dropdown-item">
                  <!-- Message Start -->
                  <div class="media">
                    <img src="dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                    <div class="media-body">
                      <h3 class="dropdown-item-title">
                        Brad Diesel
                        <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                      </h3>
                      <p class="text-sm">Call me whenever you can...</p>
                      <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                    </div>
                  </div>
                  <!-- Message End -->
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item">
                  <!-- Message Start -->
                  <div class="media">
                    <img src="dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                    <div class="media-body">
                      <h3 class="dropdown-item-title">
                        John Pierce
                        <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                      </h3>
                      <p class="text-sm">I got your message bro</p>
                      <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                    </div>
                  </div>
                  <!-- Message End -->
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item">
                  <!-- Message Start -->
                  <div class="media">
                    <img src="dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                    <div class="media-body">
                      <h3 class="dropdown-item-title">
                        Nora Silvester
                        <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                      </h3>
                      <p class="text-sm">The subject goes here</p>
                      <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                    </div>
                  </div>
                  <!-- Message End -->
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
              </div>
            </li>
           
            <li class="nav-item">
              <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                <i class="fas fa-expand-arrows-alt"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
            </li>
          
          </ul>
        </nav>
        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
          <!-- Brand Logo -->
          <!-- Sidebar -->
          <div class="sidebar">
            <!-- Sidebar user panel (optional) -->
            <div class="user-panel mt-3 pb-3 mb-3 d-flex">
              <div class="image">
                <img src="dist/img/user2-160x160.jpg" class="img-circle elevation-2" alt="User Image">
              </div>
              <div class="info">
                <a href="#" class="d-block">
                  <b><span><style="color:yellow">@user.Firstname @user.Lastname.</span></b>
                </a>
              </div>
            </div>
            <!-- Sidebar Menu -->
            <nav class="mt-2">
              <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
                <!-- Add icons to the links using the .nav-icon class
                    with font-awesome or any other icon font library -->
                <li class="nav-item menu-open">
                  <a href="#" class="nav-link active">
                    <i class="nav-icon fas fa-tachometer-alt"></i>
                  </a>
                  <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a class="nav-link text-light" asp-area="" asp-controller="Dashboard" asp-action="BSDashboard">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Sugar</p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-light" asp-area="" asp-controller="Dashboard" asp-action="BPDashboard">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Blood Pressure</p>
                      </a>
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-chart-pie"></i>
                    <p>
                      Charts
                      <i class="right fas fa-angle-left"></i>
                    </p>
                  </a>
                  <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a class="nav-link text-light" asp-area="" asp-controller="Home" asp-action="List">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Medication</p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-light" asp-area="" asp-controller="Bloodpressure" asp-action="BPList">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Blood Pressure</p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-light" asp-area="" asp-controller="Bloodsugar" asp-action="BSList">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Blood Sugar</p>
                      </a>
                    </li>
                  </ul>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fas fa-table"></i>
                    <p>
                      Labs
                      <i class="fas fa-angle-left right"></i>
                    </p>
                  </a>
                  <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a href="" class="nav-link">
                        <i class="far fa-circle nav-icon"></i>
                        <p>January</p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a href="" class="nav-link">
                        <i class="far fa-circle nav-icon"></i>
                        <p>February</p>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a href="" class="nav-link">
                        <i class="far fa-circle nav-icon"></i>
                        <p>March</p>
                      </a>
                    </li>
                  </ul>
                </li>
                <li class="nav-header">Accessories</li>
                <li class="nav-item">
                  <a href="" class="nav-link">
                    <i class="nav-icon far fa-calendar-alt"></i>
                    <p>
                      Calendar
                      <span class="badge badge-info right">2</span>
                    </p>
                  </a>
                </li>
              </ul>
            </nav>
            <!-- /.sidebar-menu -->
          </div>
          <!-- /.sidebar -->
        </aside>

        <div class="content-wrapper>
          <!-- Content Header (Page header) -->
          <!-- /.content-header -->
          <main role="main" class="content">
            <div class="container-fluid">
              @* @RenderBody() *@
              <!-- Small boxes (Stat box) -->
                <div class="row">
                    <!-- ./col -->
                    <div class="col-lg-3 col-6">
                      <!-- small box -->
                      <div class="@sysBoxColor">
                        <div class="inner">
                          <h3>@Model.ThirtyDaysAvgSystolic</h3>
                          <p>Blood Pressure (Systolic)</p>
                        </div>
                        <div class="icon">
                          <i class="ion ion-stats-bars"></i>
                        </div>
                        <a class="nav-link text-dark" asp-area="" asp-controller="Bloodpressure" asp-action="BPList" class="small-box-footer">
                          <i class="fas fa-arrow-circle-up"></i>
                            &nbsp;
                              <span class="high">@Model.ThirtyDaysHighSystolic</span> 
                                &nbsp;&nbsp;
                                  <i class="fas fa-arrow-circle-right"></i>
                                    &nbsp;&nbsp;
                                      <span class="low">@Model.ThirtyDaysLowSystolic</span>
                                        &nbsp;<i class="fas fa-arrow-circle-down"></i>
                        </a>
                      </div>
                    </div>
                    <!-- ./col -->
                    <div class="col-lg-3 col-6">
                      <!-- small box -->
                      @* <div class="small-box bg-warning"> *@
                      <div class="@diaBoxColor">
                        <div class="inner">
                          <h3>@Model.ThirtyDaysAvgDiastolic</h3>
                          <p>Blood Pressure (Diastolic)</p>
                        </div>
                        <div class="icon">
                          <i class="ion ion-person-add"></i>
                        </div>
                        @* <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a> *@
                        <a class="nav-link text-dark" asp-area="" asp-controller="Bloodpressure" asp-action="BPList" class="small-box-footer">
                          <i class="fas fa-arrow-circle-up"></i>
                            &nbsp;
                              <span class="high">@Model.ThirtyDaysHighDiastolic</span> 
                                &nbsp;&nbsp;
                                  <i class="fas fa-arrow-circle-right"></i>
                                    &nbsp;&nbsp;
                                      <span class="low">@Model.ThirtyDaysLowDiastolic</span>
                                        &nbsp;<i class="fas fa-arrow-circle-down"></i>
                        </a>
                      </div>
                    </div>
                    <!-- ./col -->
                    <div class="col-lg-3 col-6">
                      <!-- small box -->
                      @* <div class="small-box bg-danger"> *@
                      <div class="@pulsBoxColor">
                        <div class="inner">
                          <h3>@Model.ThirtyDaysAvgPulse</h3>
                          <p>Pulse</p>
                        </div>
                        <div class="icon">
                          <i class="ion ion-pie-graph"></i>
                        </div>
                        @* <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a> *@
                        <a class="nav-link text-dark" asp-area="" asp-controller="Bloodpressure" asp-action="BPList" class="small-box-footer">
                          <i class="fas fa-arrow-circle-up"></i>
                            &nbsp;
                              <span class="high">@Model.ThirtyDaysHighPulse</span> 
                                &nbsp;&nbsp;
                                  <i class="fas fa-arrow-circle-right"></i>
                                    &nbsp;&nbsp;
                                      <span class="low">@Model.ThirtyDaysLowPulse</span>
                                        &nbsp;<i class="fas fa-arrow-circle-down"></i>
                        </a>

                      </div>
                    </div>
                    <!-- ./col -->
                    <div class="col-lg-3 col-6">
                      <!-- small box -->
                      @* <div class="small-box bg-danger"> *@
                      <div class="@sgrBoxColor">
                        <div class="inner">
                          <h3>@Model.ThirtyDaysAvgSugar</h3>
                          <p>Sugar</p>
                        </div>
                        <div class="icon">
                          <i class="ion ion-pie-graph"></i>
                        </div>
                        @* <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a> *@
                        <a class="nav-link text-dark" asp-area="" asp-controller="Bloodsugar" asp-action="BSList" class="small-box-footer">
                          <i class="fas fa-arrow-circle-up"></i>
                            &nbsp;
                              <span class="high">@Model.ThirtyDaysHighSugar</span> 
                                &nbsp;&nbsp;
                                  <i class="fas fa-arrow-circle-right"></i>
                                    &nbsp;&nbsp;
                                      <span class="low">@Model.ThirtyDaysLowSugar</span>
                                        &nbsp;<i class="fas fa-arrow-circle-down"></i>
                        </a>
                      </div>
                    </div>
                </div>
                 <div class="row">
          <!-- Left col -->
          <section class="col-lg-7 connectedSortable">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-chart-pie mr-1"></i>
                  Blood Pressure (30 days)
                </h3>
                <div class="card-tools">
                  @* <ul class="nav nav-pills ml-auto">
                    <li class="nav-item">
                      <a class="nav-link active" href="" data-toggle="tab">Area</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="" data-toggle="tab">Donut</a>
                    </li>
                  </ul> *@
                </div>
              </div><!-- /.card-header -->
              <div class="card-body">
                        <div class="tab-content p-0">
                                    <div style="position: relative; height: 375px;">
                                            <div>
                                                  <figure class="highcharts-figure">
                                                      <div id="container"></div>
                                                  </figure>
                                                  <script>
                                                            var dataChartSystolic = [];
                                                            var dataChartDiastolic = [];
                                                            var dataChartTimeStamp = [];

                                                            var json = @Json.Serialize(chartSys);
                                                            json.forEach(
                                                                e => dataChartSystolic.push(e)
                                                            );

                                                            var json = @Json.Serialize(chartDia);
                                                            json.forEach(
                                                                e => dataChartDiastolic.push(e)
                                                            );

                                                            var json = @Json.Serialize(chartTime);
                                                            json.forEach(
                                                            e => dataChartTimeStamp.push(e.toString())
                                                            );                                          
                                                            
                                                            Highcharts.chart('container', {
                                                                chart: {
                                                                    type: 'line'
                                                                },
                                                                title: {
                                                                    text: ''
                                                                },
                                                                subtitle: {
                                                                    text: '@user.Firstname, @user.Lastname Blood Pressure vs. Time Stamp'
                                                                },
                                                                xAxis: {
                                                                    categories: dataChartTimeStamp
                                                                },
                                                                yAxis: {
                                                                    title: {
                                                                        text: 'mm Hg'
                                                                    }
                                                                },
                                                                plotOptions: {
                                                                    line: {
                                                                        dataLabels: {
                                                                            enabled: true
                                                                        },
                                                                        enableMouseTracking: false
                                                                    }
                                                                },
                                                                series: [{
                                                                    name: 'Systolic',
                                                                    data: dataChartSystolic
                                                                }, {
                                                                        name: 'Diastolic',
                                                                        data: dataChartDiastolic
                                                                }]
                                                            });

                                                  </script>
                                            </div>
                                    </div>
                        </div>
              </div><!-- /.card-body -->
            </div>


            <div class="card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-chart-pie mr-1"></i>
                  Blood Sugar (30 days)
                </h3>
                <div class="card-tools">
                  @* <ul class="nav nav-pills ml-auto">
                    <li class="nav-item">
                      <a class="nav-link active" href="" data-toggle="tab">Area</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="" data-toggle="tab">Donut</a>
                    </li>
                  </ul> *@
                </div>
              </div><!-- /.card-header -->
              <div class="card-body">
                        <div class="tab-content p-0">
                                    <div style="position: relative; height: 275px;">
                                            <div>
                                                  <figure class="highcharts-figure">
                                                      <div id="sugar"></div>
                                                  </figure>
                                                  <script>
                                                            var dataChartSugar = [];
                                                            var dataChartTimeStamp = [];

                                                            var json = @Json.Serialize(chartSgr);
                                                            json.forEach(
                                                                e => dataChartSugar.push(e)
                                                            );   

                                                            Highcharts.chart('sugar', {
                                                                  chart: {
                                                                      type: 'line'
                                                                  },
                                                                  title: {
                                                                      text: ''
                                                                  },
                                                                  subtitle: {
                                                                      text: '@user.Firstname, @user.Lastname Blood Sugar vs. Time Stamp'
                                                                  },
                                                                  xAxis: {
                                                                      crosshair: true
                                                                  },
                                                                  yAxis: {
                                                                      min: 0,
                                                                      title: ''
                                                                  },
                                                                  tooltip: {
                                                                      headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                                                                      pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                                                          '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                                                                      footerFormat: '</table>',
                                                                      shared: true,
                                                                      useHTML: true
                                                                  },
                                                                  plotOptions: {
                                                                      column: {
                                                                          pointPadding: 0.2,
                                                                          borderWidth: 0
                                                                      }
                                                                  },
                                                                  series: [{
                                                                      name: 'Sugar',
                                                                      data: dataChartSugar
                                                                  }]
                                                          });    
                                                  </script>
                                            </div>
                                    </div>
                        </div>
              </div><!-- /.card-body -->
            </div>

            @* <div class="card">
              <div class="card-header">
                <h3 class="card-title">
                  <i class="fas fa-chart-pie mr-1"></i>
                  Blood Sugar (30 days)
                </h3>
                <div class="card-tools">
                  
                </div>
              </div><!-- /.card-header -->
              <div class="card-body">
                        <div class="tab-content p-0">
                                    <div style="position: relative; height: 250px;">
                                            <div>
                                                  <figure class="highcharts-figure">
                                                      <div id="sugar"></div>
                                                  </figure>
                                                  <script>
                                                            var dataChartSystolic = [];
                                                            var dataChartDiastolic = [];
                                                            var dataChartTimeStamp = [];

                                                            var json = @Json.Serialize(chartSys);
                                                            json.forEach(
                                                                e => dataChartSystolic.push(e)
                                                            );

                                                            var json = @Json.Serialize(chartDia);
                                                            json.forEach(
                                                                e => dataChartDiastolic.push(e)
                                                            );

                                                            var json = @Json.Serialize(chartTime);
                                                            json.forEach(
                                                            e => dataChartTimeStamp.push(e.toString())
                                                            );                                          
                                                            
                                                            Highcharts.chart('sugar', {
                                                            chart: {
                                                                type: 'bar'
                                                            },
                                                            title: {
                                                                text: ''
                                                            },
                                                            subtitle: {
                                                                text: '
                                                            },
                                                            xAxis: {
                                                                categories: [
                                                                    'Jan',
                                                                    'Feb',
                                                                    'Mar',
                                                                    'Apr',
                                                                    'May',
                                                                    'Jun',
                                                                    'Jul',
                                                                    'Aug',
                                                                    'Sep',
                                                                    'Oct',
                                                                    'Nov',
                                                                    'Dec'
                                                                ],
                                                                crosshair: true
                                                            },
                                                            yAxis: {
                                                                min: 0,
                                                                title: {
                                                                    text: 'mg/dl'
                                                                }
                                                            },
                                                            tooltip: {
                                                                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                                                                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                                                                    '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                                                                footerFormat: '</table>',
                                                                shared: true,
                                                                useHTML: true
                                                            },
                                                            plotOptions: {
                                                                column: {
                                                                    pointPadding: 0.2,
                                                                    borderWidth: 0
                                                                }
                                                            },
                                                            series: [{
                                                                  name: 'Tokyo',
                                                                  data: [100, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]

                                                              }]
                                                        });

                                                  </script>
                                            </div>
                                    </div>
                        </div>
              </div><!-- /.card-body -->
            </div> *@
          </section>
         
          <!-- /.Left col -->
          <!-- right col (We are only adding the ID to make the widgets sortable)-->
          <section class="col-lg-5 connectedSortable">
            <!-- Map card -->
            <!-- Medication --->
            <div class="card bg-gradient-primary">
              <div class="card-header border-0">
                <h3 class="card-title">
                  <i class="fas fa-prescription mr-1"></i>
                  Medication(s)
                </h3>
                <!-- card tools -->
                <div class="card-tools">
                  <button type="button" class="btn btn-primary btn-sm daterange" title="Date range">
                    <i class="far fa-calendar-alt"></i>
                  </button>
                  <button type="button" class="btn btn-primary btn-sm" data-card-widget="collapse" title="Collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                </div>
                <!-- /.card-tools -->
              </div>
              <div class="card-body">
                @* <div style="height: 250px; width: 100%;"> *@
                  @foreach (var medication in Model.Medication){
                      @* <div > *@
                        <span ><a href="@Url.Action("Details", "Home", new { id = medication.Id })" style="color:white">@medication.Name</a> (@medication.Dose) </span> <br>
                      @* </div> *@
                  } 
                @* </div> *@
              </div>
              <!-- /.card-body-->
              <div class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center">
                    <div id="sparkline-1"></div>
                    <div class="text-white">Doctors</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <div id="sparkline-2"></div>
                    <div class="text-white">Pharmacy</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <div id="sparkline-3"></div>
                    <div class="text-white">Appointments</div>
                  </div>
                  <!-- ./col -->
                </div>
                <!-- /.row -->
              </div>
            </div>
            <!-- /.card -->

            <!-- Lab(s) & Test(s) -->
            <div class="card bg-gradient-info">
              <div class="card-header border-0">
                <h3 class="card-title">
                  <i class="fas fa-flask mr-1"></i>
                  Lab(s) & Test(s)
                </h3>

                <div class="card-tools">
                  <button type="button" class="btn bg-info btn-sm" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn bg-info btn-sm" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <div class="card-body">
                <canvas class="chart" id="line-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
              </div>
              <!-- /.card-body -->
              @* <div class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">Mail-Orders</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">Online</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">In-Store</div>
                  </div>
                  <!-- ./col -->
                </div>
                <!-- /.row -->
              </div> *@
              <!-- /.card-footer -->
            </div>
            <!-- /.card -->

             <!-- Appointments -->
            <div class="card bg-gradient-success">
              <div class="card-header border-0">
                <h3 class="card-title">
                  <i class="fas fa-flask mr-1"></i>
                  Appointment(s)
                </h3>

                <div class="card-tools">
                  <button type="button" class="btn bg-success btn-sm" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn bg-success btn-sm" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <div class="card-body">
                @if (SignInManager.IsSignedIn(User) && Model?.Appointments != null){
                    <div>
                      @foreach (var appointment in Model.Appointments){
                            <div > 
                              <span ><a href="@Url.Action("AppointmentDetails", "Home", new { id = appointment.Id })" style="color:white">@appointment.Name</a></span> 
                              <span > @appointment.Scheduled </span>
                              <span > @appointment.AppointmentType </span>
                              <span > @appointment.Suite </span> 
                              <span > @appointment.Street </span>  
                              <span > @appointment.City </span>
                              <span style="@(Int32.Parse(appointment.Days) <= 2 ? "Background-color:red" : "")"> ( Days Left: @appointment.Days )</span>
                            </div>
                      } 
                    </div>
                }
              </div>
              <!-- /.card-body -->
              @* <div class="card-footer bg-transparent">
                <div class="row">
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">Mail-Orders</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">Online</div>
                  </div>
                  <!-- ./col -->
                  <div class="col-4 text-center">
                    <input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60"
                           data-fgColor="#39CCCC">

                    <div class="text-white">In-Store</div>
                  </div>
                  <!-- ./col -->
                </div>
                <!-- /.row -->
              </div> *@
              <!-- /.card-footer -->
            </div>
            <!-- /.card -->

            <!-- Calendar -->
            <!-- Calendar -->
            <div class="card bg-gradient-warning">
              <div class="card-header border-0">
                <h3 class="card-title">
                  <i class="far fa-calendar-alt"></i>
                  Calendar
                </h3>
                <!-- tools card -->
                <div class="card-tools">
                  <!-- button with a dropdown -->
                  <div class="btn-group">
                    <button type="button" class="btn btn-warning btn-sm dropdown-toggle" data-toggle="dropdown" data-offset="-52">
                      <i class="fas fa-bars"></i>
                    </button>
                    <div class="dropdown-menu" role="menu">
                      <a href="#" class="dropdown-item">Add new event</a>
                      <a href="#" class="dropdown-item">Clear events</a>
                      <div class="dropdown-divider"></div>
                      <a href="#" class="dropdown-item">View calendar</a>
                    </div>
                  </div>
                  <button type="button" class="btn btn-warning btn-sm" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                  <button type="button" class="btn btn-warning btn-sm" data-card-widget="remove">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <!-- /. tools -->
              </div>
              <!-- /.card-header -->
              <div class="card-body pt-0">
                <!--The calendar -->
                <div id="calendar" style="width: 100%"></div>
              </div>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </section>
                </div>
            </div>
          </main>
        </div>
    </div>
   
    <!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="plugins/moment/moment.min.js"></script>
<script src="plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="dist/js/pages/dashboard.js"></script>
</body>
</html>  
